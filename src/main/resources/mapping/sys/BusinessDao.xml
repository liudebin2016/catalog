<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jusfoun.catalog.dao.BusinessDao" >
<!-- 
  <resultMap id="BaseResultMap" type="com.jusfoun.catalog.entity.Business" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="name_ref" property="nameRef" jdbcType="VARCHAR" />
    <result column="first_name" property="firstName" jdbcType="VARCHAR" />
    <result column="second_name" property="secondName" jdbcType="VARCHAR" />
    <result column="third_name" property="thirdName" jdbcType="VARCHAR" />
    <result column="code" property="code" jdbcType="VARCHAR" />
    <result column="type" property="type" jdbcType="VARCHAR" />
    <result column="basis" property="basis" jdbcType="VARCHAR" />
    <result column="flow" property="flow" jdbcType="VARCHAR" />
    <result column="summary" property="summary" jdbcType="VARCHAR" />
    <result column="time_limit" property="timeLimit" jdbcType="VARCHAR" />
    <result column="charge_basis" property="chargeBasis" jdbcType="VARCHAR" />
    <result column="charge_office_id" property="chargeOfficeId" jdbcType="INTEGER" />
    <result column="impl_office_id" property="implOfficeId" jdbcType="INTEGER" />
    <result column="workload" property="workload" jdbcType="VARCHAR" />
    <result column="relate_office" property="relateOffice" jdbcType="VARCHAR" />
    <result column="need_data" property="needData" jdbcType="VARCHAR" />
    <result column="produce_data" property="produceData" jdbcType="VARCHAR" />
    <result column="is_use" property="isUse" jdbcType="VARCHAR" />
    <result column="share_with" property="shareWith" jdbcType="VARCHAR" />
    <result column="create_by" property="createBy" jdbcType="INTEGER" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="update_by" property="updateBy" jdbcType="INTEGER" />
    <result column="update_date" property="updateDate" jdbcType="TIMESTAMP" />
    <result column="del_flag" property="delFlag" jdbcType="CHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.jusfoun.catalog.entity.Business" extends="BaseResultMap" >
    <result column="remarks" property="remarks" jdbcType="LONGVARCHAR" />
  </resultMap>
 -->
  <sql id="Base_Column_List" >
    id, name, name_ref, first_name, second_name, third_name, code, type, basis, flow, 
    summary, time_limit, charge_basis, charge_office_id, impl_office_id, workload, relate_office, 
    need_data, produce_data, is_use, share_with,
<!--      create_by AS "createBy.id",  -->
     create_date, 
<!--      update_by AS "updateBy.id", -->
      update_date, 
    del_flag,status
  </sql>
  <sql id="Blob_Column_List" >
    remarks
  </sql>
  <select id="get" parameterType="java.lang.Integer" resultType="Business">
    SELECT 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    FROM business
    WHERE id = #{id,jdbcType=INTEGER}
  </select>
  
  <select id="findList" parameterType="Business" resultType="Business">
    SELECT 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    FROM business
    <trim prefix="WHERE" prefixOverrides="AND|OR">  
	    <if test="name!=null and name!='' ">  
	        name like #{name}
	    </if>  
	    <if test="status!= null ">  
	        AND status=#{status}  
	    </if>  
	</trim>
    ${sqlMap.dsf}
    
  </select>
  
  
  <delete id="delete" parameterType="Business" >
    DELETE FROM 
    	business
    WHERE 
    	id = #{id,jdbcType=INTEGER}
  </delete>
  
  <insert id="insert" parameterType="com.jusfoun.catalog.entity.Business" >
    insert into business (id, name, name_ref, 
      first_name, second_name, third_name, 
      code, type, basis, 
      flow, summary, time_limit, 
      charge_basis, charge_office_id, impl_office_id, 
      workload, relate_office, need_data, 
      produce_data, is_use, share_with, 
      create_by, create_date, update_by, 
      update_date, del_flag, remarks
      )
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{nameRef,jdbcType=VARCHAR}, 
      #{firstName,jdbcType=VARCHAR}, #{secondName,jdbcType=VARCHAR}, #{thirdName,jdbcType=VARCHAR}, 
      #{code,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR}, #{basis,jdbcType=VARCHAR}, 
      #{flow,jdbcType=VARCHAR}, #{summary,jdbcType=VARCHAR}, #{timeLimit,jdbcType=VARCHAR}, 
      #{chargeBasis,jdbcType=VARCHAR}, #{chargeOfficeId,jdbcType=INTEGER}, #{implOfficeId,jdbcType=INTEGER}, 
      #{workload,jdbcType=VARCHAR}, #{relateOffice,jdbcType=VARCHAR}, #{needData,jdbcType=VARCHAR}, 
      #{produceData,jdbcType=VARCHAR}, #{isUse,jdbcType=VARCHAR}, #{shareWith,jdbcType=VARCHAR}, 
      #{createBy.id,jdbcType=INTEGER}, #{createDate,jdbcType=TIMESTAMP}, #{updateBy.id,jdbcType=INTEGER}, 
      #{updateDate,jdbcType=TIMESTAMP}, #{delFlag,jdbcType=CHAR}, #{remarks,jdbcType=LONGVARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.jusfoun.catalog.entity.Business" >
    insert into business
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="nameRef != null" >
        name_ref,
      </if>
      <if test="firstName != null" >
        first_name,
      </if>
      <if test="secondName != null" >
        second_name,
      </if>
      <if test="thirdName != null" >
        third_name,
      </if>
      <if test="code != null" >
        code,
      </if>
      <if test="type != null" >
        type,
      </if>
      <if test="basis != null" >
        basis,
      </if>
      <if test="flow != null" >
        flow,
      </if>
      <if test="summary != null" >
        summary,
      </if>
      <if test="timeLimit != null" >
        time_limit,
      </if>
      <if test="chargeBasis != null" >
        charge_basis,
      </if>
      <if test="chargeOfficeId != null" >
        charge_office_id,
      </if>
      <if test="implOfficeId != null" >
        impl_office_id,
      </if>
      <if test="workload != null" >
        workload,
      </if>
      <if test="relateOffice != null" >
        relate_office,
      </if>
      <if test="needData != null" >
        need_data,
      </if>
      <if test="produceData != null" >
        produce_data,
      </if>
      <if test="isUse != null" >
        is_use,
      </if>
      <if test="shareWith != null" >
        share_with,
      </if>
      <if test="createBy != null" >
        create_by,
      </if>
      <if test="createDate != null" >
        create_date,
      </if>
      <if test="updateBy != null" >
        update_by,
      </if>
      <if test="updateDate != null" >
        update_date,
      </if>
      <if test="delFlag != null" >
        del_flag,
      </if>
      <if test="remarks != null" >
        remarks,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="nameRef != null" >
        #{nameRef,jdbcType=VARCHAR},
      </if>
      <if test="firstName != null" >
        #{firstName,jdbcType=VARCHAR},
      </if>
      <if test="secondName != null" >
        #{secondName,jdbcType=VARCHAR},
      </if>
      <if test="thirdName != null" >
        #{thirdName,jdbcType=VARCHAR},
      </if>
      <if test="code != null" >
        #{code,jdbcType=VARCHAR},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="basis != null" >
        #{basis,jdbcType=VARCHAR},
      </if>
      <if test="flow != null" >
        #{flow,jdbcType=VARCHAR},
      </if>
      <if test="summary != null" >
        #{summary,jdbcType=VARCHAR},
      </if>
      <if test="timeLimit != null" >
        #{timeLimit,jdbcType=VARCHAR},
      </if>
      <if test="chargeBasis != null" >
        #{chargeBasis,jdbcType=VARCHAR},
      </if>
      <if test="chargeOfficeId != null" >
        #{chargeOfficeId,jdbcType=INTEGER},
      </if>
      <if test="implOfficeId != null" >
        #{implOfficeId,jdbcType=INTEGER},
      </if>
      <if test="workload != null" >
        #{workload,jdbcType=VARCHAR},
      </if>
      <if test="relateOffice != null" >
        #{relateOffice,jdbcType=VARCHAR},
      </if>
      <if test="needData != null" >
        #{needData,jdbcType=VARCHAR},
      </if>
      <if test="produceData != null" >
        #{produceData,jdbcType=VARCHAR},
      </if>
      <if test="isUse != null" >
        #{isUse,jdbcType=VARCHAR},
      </if>
      <if test="shareWith != null" >
        #{shareWith,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null" >
        #{createBy.id,jdbcType=INTEGER},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null" >
        #{updateBy.id,jdbcType=INTEGER},
      </if>
      <if test="updateDate != null" >
        #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="delFlag != null" >
        #{delFlag,jdbcType=CHAR},
      </if>
      <if test="remarks != null" >
        #{remarks,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update" parameterType="Business" >
    update business
    <set >
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="nameRef != null" >
        name_ref = #{nameRef,jdbcType=VARCHAR},
      </if>
      <if test="firstName != null" >
        first_name = #{firstName,jdbcType=VARCHAR},
      </if>
      <if test="secondName != null" >
        second_name = #{secondName,jdbcType=VARCHAR},
      </if>
      <if test="thirdName != null" >
        third_name = #{thirdName,jdbcType=VARCHAR},
      </if>
      <if test="code != null" >
        code = #{code,jdbcType=VARCHAR},
      </if>
      <if test="type != null" >
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="basis != null" >
        basis = #{basis,jdbcType=VARCHAR},
      </if>
      <if test="flow != null" >
        flow = #{flow,jdbcType=VARCHAR},
      </if>
      <if test="summary != null" >
        summary = #{summary,jdbcType=VARCHAR},
      </if>
      <if test="timeLimit != null" >
        time_limit = #{timeLimit,jdbcType=VARCHAR},
      </if>
      <if test="chargeBasis != null" >
        charge_basis = #{chargeBasis,jdbcType=VARCHAR},
      </if>
      <if test="chargeOfficeId != null" >
        charge_office_id = #{chargeOfficeId,jdbcType=INTEGER},
      </if>
      <if test="implOfficeId != null" >
        impl_office_id = #{implOfficeId,jdbcType=INTEGER},
      </if>
      <if test="workload != null" >
        workload = #{workload,jdbcType=VARCHAR},
      </if>
      <if test="relateOffice != null" >
        relate_office = #{relateOffice,jdbcType=VARCHAR},
      </if>
      <if test="needData != null" >
        need_data = #{needData,jdbcType=VARCHAR},
      </if>
      <if test="produceData != null" >
        produce_data = #{produceData,jdbcType=VARCHAR},
      </if>
      <if test="isUse != null" >
        is_use = #{isUse,jdbcType=VARCHAR},
      </if>
      <if test="shareWith != null" >
        share_with = #{shareWith,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null" >
        create_by = #{createBy.id,jdbcType=INTEGER},
      </if>
      <if test="createDate != null" >
        create_date = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null" >
        update_by = #{updateBy.id,jdbcType=INTEGER},
      </if>
      <if test="updateDate != null" >
        update_date = #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="delFlag != null" >
        del_flag = #{delFlag,jdbcType=CHAR},
      </if>
      <if test="remarks != null" >
        remarks = #{remarks,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.jusfoun.catalog.entity.Business" >
    update business
    set name = #{name,jdbcType=VARCHAR},
      name_ref = #{nameRef,jdbcType=VARCHAR},
      first_name = #{firstName,jdbcType=VARCHAR},
      second_name = #{secondName,jdbcType=VARCHAR},
      third_name = #{thirdName,jdbcType=VARCHAR},
      code = #{code,jdbcType=VARCHAR},
      type = #{type,jdbcType=VARCHAR},
      basis = #{basis,jdbcType=VARCHAR},
      flow = #{flow,jdbcType=VARCHAR},
      summary = #{summary,jdbcType=VARCHAR},
      time_limit = #{timeLimit,jdbcType=VARCHAR},
      charge_basis = #{chargeBasis,jdbcType=VARCHAR},
      charge_office_id = #{chargeOfficeId,jdbcType=INTEGER},
      impl_office_id = #{implOfficeId,jdbcType=INTEGER},
      workload = #{workload,jdbcType=VARCHAR},
      relate_office = #{relateOffice,jdbcType=VARCHAR},
      need_data = #{needData,jdbcType=VARCHAR},
      produce_data = #{produceData,jdbcType=VARCHAR},
      is_use = #{isUse,jdbcType=VARCHAR},
      share_with = #{shareWith,jdbcType=VARCHAR},
      create_by = #{createBy.id,jdbcType=INTEGER},
      create_date = #{createDate,jdbcType=TIMESTAMP},
      update_by = #{updateBy.id,jdbcType=INTEGER},
      update_date = #{updateDate,jdbcType=TIMESTAMP},
      del_flag = #{delFlag,jdbcType=CHAR},
      remarks = #{remarks,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jusfoun.catalog.entity.Business" >
    update business
    set name = #{name,jdbcType=VARCHAR},
      name_ref = #{nameRef,jdbcType=VARCHAR},
      first_name = #{firstName,jdbcType=VARCHAR},
      second_name = #{secondName,jdbcType=VARCHAR},
      third_name = #{thirdName,jdbcType=VARCHAR},
      code = #{code,jdbcType=VARCHAR},
      type = #{type,jdbcType=VARCHAR},
      basis = #{basis,jdbcType=VARCHAR},
      flow = #{flow,jdbcType=VARCHAR},
      summary = #{summary,jdbcType=VARCHAR},
      time_limit = #{timeLimit,jdbcType=VARCHAR},
      charge_basis = #{chargeBasis,jdbcType=VARCHAR},
      charge_office_id = #{chargeOfficeId,jdbcType=INTEGER},
      impl_office_id = #{implOfficeId,jdbcType=INTEGER},
      workload = #{workload,jdbcType=VARCHAR},
      relate_office = #{relateOffice,jdbcType=VARCHAR},
      need_data = #{needData,jdbcType=VARCHAR},
      produce_data = #{produceData,jdbcType=VARCHAR},
      is_use = #{isUse,jdbcType=VARCHAR},
      share_with = #{shareWith,jdbcType=VARCHAR},
      create_by = #{createBy.id,jdbcType=INTEGER},
      create_date = #{createDate,jdbcType=TIMESTAMP},
      update_by = #{updateBy.id,jdbcType=INTEGER},
      update_date = #{updateDate,jdbcType=TIMESTAMP},
      del_flag = #{delFlag,jdbcType=CHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <!-- 根据机构d查询对应的业务 -->
  <select id="findBusinessByOfficeId" parameterType="java.lang.Integer" resultType="Business">
	select b.id,b.name
	from business b
	where charge_office_id = #{officeId}
  </select>
</mapper>